📖 КАК ИСПОЛЬЗОВАТЬ РАЗДЕЛ "ДЕТАЛЬНЫЙ ПРИМЕР" В DEFENSE.MD

═══════════════════════════════════════════════════════════════════════════════

ЭТОТ РАЗДЕЛ НАХОДИТСЯ В КОНЦЕ DEFENSE.MD (РАЗДЕЛ 10)

Он содержит полный пример прохода данных через систему с указанием:
✅ Какие файлы открывать
✅ Какие строки смотреть
✅ Как данные проходят через паттерны
✅ Почему так сделано

═══════════════════════════════════════════════════════════════════════════════

📝 ПЛАН ЧТЕНИЯ РАЗДЕЛА 10 ВО ВРЕМЯ ЗАЩИТЫ (8-10 минут)

1️⃣ ШАГ 1: СОЗДАНИЕ ДАННЫХ (1 минута)
   
   Читайте:
   "Пользователь создает новый прямоугольник с координатами..."
   
   Откройте ВЫ (на экране):
   ├─ src/entities/Rectangle.ts (строки 1-50)
   ├─ src/entities/Point.ts (показать конструктор)
   
   Покажите код:
   └─ Rectangle конструктор автоматически считает area и perimeter
   
   Скажите:
   "Видите? Площадь автоматически считается как 5 × 3 = 15"

───────────────────────────────────────────────────────────────────────────────

2️⃣ ШАГ 2: ДОБАВЛЕНИЕ В REPOSITORY (2 минуты)
   
   Читайте:
   "Теперь добавляем прямоугольник в репозиторий..."
   
   Откройте ВЫ (на экране):
   ├─ src/patterns/Repository.ts (метод add(), строки 45-70)
   ├─ src/patterns/Warehouse.ts (getInstance(), строки 15-25)
   ├─ src/patterns/WarehouseObserver.ts (update(), строки 10-20)
   
   Покажите код:
   ├─ В Repository.add() - как добавляется WarehouseObserver
   ├─ В Warehouse.getInstance() - как гарантируется Singleton
   ├─ В WarehouseObserver.update() - как обновляется Warehouse
   
   Скажите:
   "Видите? Repository автоматически создает наблюдателя и 
    инициирует первое обновление. Warehouse уже содержит данные!"

───────────────────────────────────────────────────────────────────────────────

3️⃣ ШАГ 3: ИЗМЕНЕНИЕ ДАННЫХ (2 минуты)
   
   Читайте:
   "Пользователь меняет размер прямоугольника..."
   
   Откройте ВЫ (на экране):
   ├─ src/entities/Rectangle.ts (метод setBottomRight(), строки 100-120)
   ├─ src/entities/Shape.ts (notifyObservers(), строки 45-55)
   ├─ src/patterns/WarehouseObserver.ts (update() снова вызывается)
   ├─ src/patterns/Warehouse.ts (setArea(), строки 50-55)
   
   Покажите код:
   ├─ setBottomRight() меняет координату
   ├─ calculateProperties() пересчитывает area (100!) и perimeter (40!)
   ├─ notifyObservers() уведомляет наблюдателей
   ├─ WarehouseObserver.update() вызывается АВТОМАТИЧЕСКИ
   ├─ Warehouse.setArea() обновляется с новым значением 100
   
   Скажите:
   "ЭТО САМОЕ ВАЖНОЕ! Observer паттерн делает это АВТОМАТИЧЕСКИ.
    Нам не нужно вручную вызывать обновление Warehouse.
    Когда rectangle изменяется - Warehouse СРАЗУ обновляется!"

───────────────────────────────────────────────────────────────────────────────

4️⃣ ШАГ 4: ПОИСК ЧЕРЕЗ SPECIFICATIONS (2 минуты)
   
   Читайте:
   "Пользователь хочет найти все прямоугольники площадью > 50..."
   
   Откройте ВЫ (на экране):
   ├─ src/patterns/Repository.ts (метод find(), строки 110-125)
   ├─ src/patterns/Specification.ts (AreaRangeSpecification, строки 180-195)
   
   Покажите код:
   ├─ Repository.find() получает все фигуры
   ├─ Для каждой проверяет спецификацию
   ├─ AreaRangeSpecification.isSatisfiedBy() возвращает TRUE
   ├─ Rectangle найден потому что 100 >= 50 && 100 <= 1000
   
   Скажите:
   "Specification паттерн позволяет писать ГИБКИЕ критерии поиска.
    Мы можем комбинировать их с AND, OR, NOT операторами.
    Вот почему rectangle был найден - его площадь 100 > 50!"

───────────────────────────────────────────────────────────────────────────────

5️⃣ ШАГ 5: СОРТИРОВКА ЧЕРЕЗ COMPARATORS (1 минута)
   
   Читайте:
   "Пользователь хочет отсортировать результаты по имени..."
   
   Откройте ВЫ (на экране):
   ├─ src/patterns/Repository.ts (метод sort(), строки 130-145)
   ├─ src/patterns/Comparator.ts (NameComparator, строки 30-40)
   
   Покажите код:
   ├─ Repository.sort() использует встроенный sort() с компаратором
   ├─ NameComparator.compare() сравнивает имена через localeCompare
   ├─ Результат: отсортированный массив
   
   Скажите:
   "Comparator паттерн позволяет переиспользовать логику сортировки.
    У нас есть 6 компараторов - можно сортировать как угодно!"

───────────────────────────────────────────────────────────────────────────────

📊 ИТОГОВАЯ ДИАГРАММА (1 минута)

   Показите диаграмму из раздела "ПОЛНЫЙ ПУТЬ ДАННЫХ В ОДНОЙ ДИАГРАММЕ"
   
   Объясните:
   "Вот полный путь данных в системе:
    1. Данные создаются в Rectangle
    2. Repository добавляет в Warehouse через Observer
    3. При изменении - Warehouse АВТОМАТИЧЕСКИ обновляется
    4. Specification ищет по критериям
    5. Comparator сортирует
    
    ВСЕ ПАТТЕРНЫ РАБОТАЮТ ВМЕСТЕ!"

───────────────────────────────────────────────────────────────────────────────

🎯 ЧТО ДОКАЗЫВАЕТ ЭТОТ РАЗДЕЛ:

✅ Repository - инкапсулирует доступ к данным
✅ Singleton - гарантирует единственный Warehouse
✅ Observer - автоматически обновляет данные
✅ Specification - гибкий и композитный поиск
✅ Comparator - переиспользуемая сортировка

✅ ВСЕ ПАТТЕРНЫ РАБОТАЮТ ВМЕСТЕ В ЕДИНОМ ПРИЛОЖЕНИИ!

───────────────────────────────────────────────────────────────────────────────

💡 СОВЕТЫ ДЛЯ ЗАЩИТЫ:

1. НЕ читайте весь раздел "Детальный пример" - ПОКАЗЫВАЙТЕ его!
   └─ Ваше слово + код на экране = самый эффективный способ

2. ОСТАНОВИТЕСЬ на ШАГЕ 3 (Observer) на 2 минуты
   └─ Это самое важное - автоматическое обновление
   └─ Это показывает зачем нужны Observer паттерны

3. ИСПОЛЬЗУЙТЕ диаграмму в конце
   └─ Она показывает ВСЕ паттерны в действии
   └─ Это итоговый аргумент "все работает вместе"

4. ЗАЧИТЫВАЙТЕ строки из текста, ПОКАЗЫВАЙТЕ код
   └─ Текст подготавливает слушателя
   └─ Код подтверждает ваши слова

───────────────────────────────────────────────────────────────────────────────

🔑 КЛЮЧЕВЫЕ ФРАЗЫ ДЛЯ ЗАЩИТЫ:

"Видите, когда мы изменяем rectangle, Observer паттерн делает 
обновление Warehouse АВТОМАТИЧЕСКИ. Нам не нужно вручную вызывать 
никакие методы. Это слабая связь между компонентами!"

"Specification паттерн позволяет нам искать по ЛЮБЫМ критериям,
не меняя код Repository. Мы просто создаем новую спецификацию!"

"Comparator паттерн работает точно так же - мы можем сортировать
по ID, имени, координатам, расстоянию - как захотим!"

"А Repository инкапсулирует ВСЕ эти операции. Если мы захотим
перейти на БД - нам нужно изменить только Repository!"

───────────────────────────────────────────────────────────────────────────────

✅ ГОТОВО К ЗАЩИТЕ!

Раздел "Детальный пример" в DEFENSE.md содержит ВСЕ что нужно для защиты:
- Примеры кода
- Названия файлов
- Номера строк для показа
- Объяснения почему так
- Полную диаграмму потока данных

═══════════════════════════════════════════════════════════════════════════════
